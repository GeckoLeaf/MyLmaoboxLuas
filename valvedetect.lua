local font = draw.CreateFont("Tahoma", 24, 400)

local valveEmployees = { "[U:1:1]", "[U:1:2]", "[U:1:3]", "[U:1:5]", "[U:1:10]", "[U:1:12]", "[U:1:15]", "[U:1:21]", "[U:1:26]", "[U:1:110]", "[U:1:2674]", "[U:1:11942]", "[U:1:37658]", "[U:1:139807]", "[U:1:158213]", "[U:1:168894]", "[U:1:169802]", "[U:1:283836]", "[U:1:297804]", "[U:1:594921]", "[U:1:1880504]", "[U:1:2048204]", "[U:1:2148202]", "[U:1:2517937]", "[U:1:2578488]", "[U:1:2890657]", "[U:1:3899398]", "[U:1:4013501]", "[U:1:4354484]", "[U:1:6194282]", "[U:1:6199884]", "[U:1:6878637]", "[U:1:7081023]", "[U:1:7448254]", "[U:1:7885469]", "[U:1:8017147]", "[U:1:8110799]", "[U:1:8193745]", "[U:1:8309789]", "[U:1:8996795]", "[U:1:9001210]", "[U:1:9056026]", "[U:1:9134413]", "[U:1:9252347]", "[U:1:10019795]", "[U:1:10057688]", "[U:1:10264334]", "[U:1:10299447]", "[U:1:10626422]", "[U:1:10703143]", "[U:1:10759617]", "[U:1:10783568]", "[U:1:11134320]", "[U:1:11930522]", "[U:1:12025348]", "[U:1:12105161]", "[U:1:12226260]", "[U:1:12229600]", "[U:1:12490127]", "[U:1:14327689]", "[U:1:15649035]", "[U:1:17756880]", "[U:1:17761489]", "[U:1:17970641]", "[U:1:18025058]", "[U:1:19992847]", "[U:1:20216567]", "[U:1:20366502]", "[U:1:20599720]", "[U:1:21026202]", "[U:1:21961518]", "[U:1:21996088]", "[U:1:23045426]", "[U:1:23946920]", "[U:1:24171378]", "[U:1:24181910]", "[U:1:24485394]", "[U:1:24663802]", "[U:1:25341944]", "[U:1:25361538]", "[U:1:25727720]", "[U:1:28479400]", "[U:1:29311622]", "[U:1:29462734]", "[U:1:29543125]", "[U:1:31125150]", "[U:1:31298475]", "[U:1:31633274]", "[U:1:31903880]", "[U:1:31954068]", "[U:1:32371352]", "[U:1:32416149]", "[U:1:32766635]", "[U:1:33139149]", "[U:1:33331029]", "[U:1:34367013]", "[U:1:34605563]", "[U:1:34744932]", "[U:1:35510339]", "[U:1:36182569]", "[U:1:38245555]", "[U:1:38734617]", "[U:1:39592739]", "[U:1:40347414]", "[U:1:40347592]", "[U:1:41283816]", "[U:1:42148150]", "[U:1:42157822]", "[U:1:42939047]", "[U:1:43152130]", "[U:1:44762715]", "[U:1:44856102]", "[U:1:45076598]", "[U:1:47391768]", "[U:1:47429504]", "[U:1:47430576]", "[U:1:47439810]", "[U:1:47951535]", "[U:1:49797024]", "[U:1:50796961]", "[U:1:51095905]", "[U:1:51883127]", "[U:1:53916868]", "[U:1:54380441]", "[U:1:54892764]", "[U:1:54995107]", "[U:1:57799072]", "[U:1:63853293]", "[U:1:63853349]", "[U:1:63853417]", "[U:1:63853439]", "[U:1:63853481]", "[U:1:63853505]", "[U:1:63853543]", "[U:1:63853569]", "[U:1:63883710]", "[U:1:63921970]", "[U:1:64136527]", "[U:1:64799196]", "[U:1:65202546]", "[U:1:68307823]", "[U:1:72224787]", "[U:1:72880358]", "[U:1:74542697]", "[U:1:74735789]", "[U:1:75020984]", "[U:1:75022526]", "[U:1:75156513]", "[U:1:76493708]", "[U:1:76647755]", "[U:1:76809739]", "[U:1:80179376]", "[U:1:80634712]", "[U:1:81444593]", "[U:1:82360597]", "[U:1:83390300]", "[U:1:84329882]", "[U:1:89318995]", "[U:1:90328591]", "[U:1:90449342]", "[U:1:93281093]", "[U:1:93807852]", "[U:1:97121490]", "[U:1:98262938]", "[U:1:98957636]", "[U:1:99077462]", "[U:1:99429242]", "[U:1:100402330]", "[U:1:101860089]", "[U:1:103277623]", "[U:1:106938663]", "[U:1:111227382]", "[U:1:111977341]", "[U:1:117756020]", "[U:1:117758707]", "[U:1:117770084]", "[U:1:117962484]", "[U:1:119908375]", "[U:1:120646492]", "[U:1:122591623]", "[U:1:122962881]", "[U:1:124911517]", "[U:1:126980591]", "[U:1:127815452]", "[U:1:132146521]", "[U:1:139509934]", "[U:1:145368109]", "[U:1:146019126]", "[U:1:149171337]", "[U:1:153699224]", "[U:1:154295990]", "[U:1:170921126]", "[U:1:175567824]", "[U:1:180669747]", "[U:1:191635658]", "[U:1:205864873]", "[U:1:238017122]", "[U:1:252840359]", "[U:1:266219488]", "[U:1:269025396]", "[U:1:301048853]", "[U:1:303520413]", "[U:1:303765880]", "[U:1:328711801]", "[U:1:342300749]", "[U:1:357625642]", "[U:1:361186358]", "[U:1:383594390]", "[U:1:388445686]", "[U:1:433578605]", "[U:1:474563524]", "[U:1:478023278]", "[U:1:490135406]", "[U:1:490861545]", "[U:1:491787686]", "[U:1:492634126]", "[U:1:841990574]", "[U:1:872788757]", "[U:1:886019845]", "[U:1:899629380]", "[U:1:910166870]", "[U:1:910509882]", "[U:1:913236548]", "[U:1:953122819]", "[U:1:1002862077]", "[U:1:1005653309]", "[U:1:1006684880]", "[U:1:1007080966]", "[U:1:1012796637]", "[U:1:1016413309]", "[U:1:1024918045]", "[U:1:1060256178]", "[U:1:1062028143]", "[U:1:1079921441]", "[U:1:1083709805]", "[U:1:1127538184]", "[U:1:1128984195]", "[U:1:1130060602]", "[U:1:1134563417]", "[U:1:1152744664]", "[U:1:1152938530]", "[U:1:1153232713]", "[U:1:1154697588]", "[U:1:1158287672]", "[U:1:1184183308]", "[U:1:1189588855]", "[U:1:1203728125]", "[U:1:1220908908]", "[U:1:1235129132]", "[U:1:1250910016]", "[U:1:1255503771]", "[U:1:1313496685]", "[U:1:1373681004]", "[U:1:1410004793]", "[U:1:1431945749]", "[U:1:1538854785]", "[U:1:1564479926]", "[U:1:1565953497]", "[U:1:1584128700]", "[U:1:1597518683]", "[U:1:1611572312]", "[U:1:1730114410]" }
local valvePlayerNamesInGame = { }

callbacks.Register("CreateMove", function()
    valvePlayerNamesInGame = { }

    for i = 1, entities.GetHighestEntityIndex() do
        if i == client.GetLocalPlayerIndex() then
            goto continue
        end

        local player = entities.GetByIndex(i)

        if not player then
            goto continue
        end

        if not player:IsValid() then
            goto continue
        end

        if player:GetClass() ~= "CTFPlayer" then
            goto continue
        end

        local playerInfo = client.GetPlayerInfo(i)
        if not playerInfo then
            goto continue
        end

        local playerSteamId = playerInfo.SteamID
        if not playerSteamId then
            goto continue
        end

        for _, steamId in ipairs(valveEmployees) do
            if playerSteamId == steamId then
                local playerName = playerInfo.Name
                if not playerName then
                    playerName = "UNKNOWN NAME"
                end

                table.insert(valvePlayerNamesInGame, playerName)

                break
            end
        end

        ::continue::
    end
end)

callbacks.Register("Draw", function()
    draw.SetFont(font)
    draw.Color(255, 0, 0, 255)

    local linesToDraw = { }
    if #valvePlayerNamesInGame > 0 then
        table.insert(linesToDraw, "VALVE EMPLOYEE(S) IN GAME!")
    end

    for _, playerName in ipairs(valvePlayerNamesInGame) do
        table.insert(linesToDraw, playerName)
    end

    for index, line in ipairs(linesToDraw) do
        local textSizeX, textSizeY = draw.GetTextSize(line)
        draw.Text(50, 50 + textSizeY * index + 2, line)
    end
end)
